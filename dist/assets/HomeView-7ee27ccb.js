import{d as l,o,c as r,a as c,b as a,r as u,F as h,e as g,t as p,f as d,n as m,u as f,w as y,T as _,p as w,g as b,h as x,i as v,j as I}from"./index-1198a6f4.js";const k="/assets/7th_nov_23_1-5f319197.png",S={class:"markdown-body"},L=c('<p>Previously I’ve already created a front-end NextJs project called <a href="https://github.com/fattynomnom/itrack-nextjs">iTrack</a>.</p><p>For context, the purpose of the app is to track user’s expenses.</p><p>As of right now, the data is the app is mocked, so what I need to do next is create a backend for it, for which I already know I want to use GraphQL (GraphQL &gt; REST ftw).</p><p>From past experience, I’ve used Hasura for creating GraphQL APIs.</p><p><strong>Pros of using Hasura:</strong></p><ul><li>Minimal code writing. APIs, models and actions can all be created / managed via UI.</li><li>Able to connect a PostgreSQL database.</li><li>Automatically handles hosting of your database and APIs.</li></ul><p><strong>Cons of using Hasura:</strong></p><ul><li>Personally prefer writing code than using UI.</li><li>If I were to host my database and APIs on Hasura, whoever wants to try out my project would also need to host their own database and APIs on Hasura as well, would be easier if APIs and database can run locally.</li><li>Expanding on allowing users to run project locally, I am aware when using Hasura’s UI, our actions (eg. running SQL queries, creating tables) can be “recorded” into code, which can be backed up to another repo to allow replication. However, I find this entire structure very messy, managing our own migration files and code is easier. I could be wrong about this and just don’t know how to manage this well enough.</li></ul><p>Overall, I decided to forgo using a platform like Hasura. Plus, it could be a chance to test out my rusty SQL query skills.</p><p>First, I setup my ExpressJs app with Apollo so that I can start writing GraphQL APIs. I followed <a href="https://blog.logrocket.com/build-graphql-app-node-js-typescript-graphql-request/">this tutorial</a>.</p><p>Then I setup a PostgreSQL database using <a href="https://gist.github.com/phortuin/2fe698b6c741fd84357cec84219c6667">these guidelines</a>.</p><p>After the database setup, I followed <a href="https://medium.com/@yasirahboyce/node-express-knex-postgresql-22e10daf0817">this tutorial</a> to setup Knex.</p><p>If you don’t know what Knex is, essentially it is a query builder for many SQL databases, including PostgreSQL. Tbh, very reminiscent of Laravel days. <a href="https://knexjs.org/">Here is the Knex documentation</a> if you’re curious.</p><p>After setting up Knex, I replaced the static datasets with PostgreSQL queries, run <code class="">npm run dev</code> and tested my APIs on <a href="https://studio.apollographql.com/sandbox/explorer">Apollo’s GraphQL sandbox</a>:</p><p><img src="'+k+'" alt="Apollo sandbox testing result"></p><p>So far everything works!</p><p>I’ve commited my progress to this repo: <a href="https://github.com/fattynomnom/itrack-expressjs">itrack-expressjs</a>.</p><p><strong>Next steps:</strong></p><ul><li>Learn how to use Knex’s query builder and replace PostgreSQL queries with Knex</li><li>Learn how to integrate <a href="https://auth0.com/">Auth0</a> into our backend application</li></ul><p><strong>Here’s a full list of resources I’ve referenced:</strong></p><ul><li><a href="https://knexjs.org/">Knex</a></li><li><a href="https://blog.logrocket.com/build-graphql-app-node-js-typescript-graphql-request/">Build a GraphQL app in Node.js with TypeScript and graphql-request</a></li><li><a href="https://gist.github.com/phortuin/2fe698b6c741fd84357cec84219c6667">Set up postgres + database on MacOS (M1)</a></li><li><a href="https://medium.com/@yasirahboyce/node-express-knex-postgresql-22e10daf0817">Node + Express + Knex + PostgreSQL</a></li></ul>',21),Q=[L],q={title:"GraphQL + PostgreSQL + ExpressJs setup",date:"7/11/23"},P=l({__name:"7th_nov_23",setup(e,{expose:s}){return s({frontmatter:{title:"GraphQL + PostgreSQL + ExpressJs setup",date:"7/11/23"},excerpt:void 0}),(n,i)=>(o(),r("div",S,Q))}}),A={class:"markdown-body"},T=c(`<p>A short one for today, but something is better than nothing I guess!</p><p>So previously I had only used <a href="https://knexjs.org/">Knex</a> for writing migration and seed files (following <a href="https://medium.com/@yasirahboyce/node-express-knex-postgresql-22e10daf0817">this tutorial</a>). Querying was still being done via SQL.</p><p>So I decided its time to convert these SQL queries to use the Knex query builder.</p><p>First, setting up the config:</p><pre><code class="">// database.ts
const Knex = knex({
    client: &#39;pg&#39;,
    connection: {
        user: ({}).POSTGRESQL_USER,
        password: ({}).POSTGRESQL_PW,
        host: ({}).POSTGRESQL_HOST,
        port: Number(({}).POSTGRESQL_PORT),
        database: ({}).POSTGRESQL_DB
    }
})

export default Knex
</code></pre><p>And after doing a brief reading of the documentation, I converted these queries:</p><pre><code class="">pool.query(&#39;SELECT * from users&#39;)
pool.query(
    &#39;INSERT INTO users (email) VALUES ($1) RETURNING email&#39;,
    [user.email]
)
</code></pre><p>Into these:</p><pre><code class="">Knex(&#39;users&#39;).select(&#39;*&#39;)
Knex(&#39;users&#39;).insert(user, &#39;*&#39;)
</code></pre><p>Much easier to read and I don’t have to worry about SQL syntax! Knex’s query builder also looks a lot like Laravel’s query builder… But its been awhile since Laravel for me, so I don’t remember these things off the top of my head anymore.</p><p><strong>Next thing I’ll be working on:</strong> Integrating Auth0 with Express</p>`,11),j=[T],E={title:"Writing queries using Knex",date:"8/11/23"},K=l({__name:"8th_nov_23",setup(e,{expose:s}){return s({frontmatter:{title:"Writing queries using Knex",date:"8/11/23"},excerpt:void 0}),(n,i)=>(o(),r("div",A,j))}}),H={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"w-6 h-6",viewBox:"0 0 24 24"},G=a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"},null,-1),N=[G];function C(e,s){return o(),r("svg",H,[...N])}const O={render:C},R=e=>(w("data-v-46e590c3"),e=e(),b(),e),$={class:"divide-y p-10 md:px-28 lg:py-36 h-full lg:overflow-y-auto"},V=c('<section data-v-46e590c3><h1 data-v-46e590c3>Hey there!</h1><p data-v-46e590c3> I&#39;m a part time software engineer and full time cat person who likes problem solving and puzzles. </p><p data-v-46e590c3> I don&#39;t have any fancy repositories for you to see (I&#39;m sure you can understand as a software developer, most of our client works are proprietary), though you can still head over to my <a href="https://github.com/fattynomnom" data-v-46e590c3>Github</a> to view my personal projects I&#39;m working on when I have the time! </p><p data-v-46e590c3> I&#39;m a huge advocate for Typescript, object-oriented programming and clean coding practices (DRY, SOLID). I know writing it is a pain, but reading clean code is <i data-v-46e590c3>*chefs kiss*</i>. Do I sit back sometimes and admire clean code structures? Yes, yes I do. </p><p data-v-46e590c3> My hobbies are gardening, reading mangas, watching movies and starting 1001 coding projects that I don&#39;t finish. </p><p data-v-46e590c3> I&#39;m trying to hold myself accountable by creating this site to document my learning process. Hopefully I&#39;ll be able to learn and update this space as much as possible (when life, work and cats doesn&#39;t get in the way). </p><p data-v-46e590c3> Just in case you&#39;re curious, this site was made with VueJs and TailwindCss (both of which I <i data-v-46e590c3>think</i> I&#39;m a master at). </p></section>',1),B=R(()=>a("h1",null,"What I'm learning",-1)),D=["onClick"],F={class:"text-sm text-gray-400"},J=l({__name:"HomeView",setup(e){const s=u([{frontmatter:E,component:K,displayed:!1},{frontmatter:q,component:P,displayed:!1}]);return(n,i)=>(o(),r("main",$,[V,a("section",null,[B,(o(!0),r(h,null,g(s.value,t=>(o(),r("div",{key:t.frontmatter.title,class:"space-y-5 p-5 md:p-10 rounded-lg bg-gray-50 overflow-hidden"},[a("div",{class:"flex items-center justify-between cursor-pointer space-x-5",onClick:M=>t.displayed=!t.displayed},[a("div",null,[a("p",F,p(t.frontmatter.date),1),a("h2",null,p(t.frontmatter.title),1)]),d(f(O),{class:m(["w-5 h-5 text-gray-500",{"rotate-180":n.displayed}])},null,8,["class"])],8,D),d(_,null,{default:y(()=>[t.displayed?(o(),x(v(t.component),{key:0})):I("",!0)]),_:2},1024)]))),128))])]))}});const U=(e,s)=>{const n=e.__vccOpts||e;for(const[i,t]of s)n[i]=t;return n},z=U(J,[["__scopeId","data-v-46e590c3"]]);export{z as default};
